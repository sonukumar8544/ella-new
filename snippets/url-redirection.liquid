
{% comment %}
  Suggest India store for India visitors on wellnessextract.com without forcing redirect.
{% endcomment %}

<style>
  /* Minimal inline styles to avoid external dependencies */
  #we-india-modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.45);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }

  #we-india-modal {
    background: #fff;
    border-radius: 8px;
    padding: 20px 22px;
    max-width: 360px;
    width: calc(100% - 32px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.18);
    font-family: inherit;
    text-align: left;
  }

  #we-india-modal h3 {
    margin: 0 0 8px;
    font-size: 18px;
    line-height: 1.3;
  }

  #we-india-modal p {
    margin: 0 0 14px;
    font-size: 14px;
    color: #333;
  }

  #we-india-modal .we-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
  }

  #we-india-modal button {
    border: none;
    cursor: pointer;
    border-radius: 6px;
    padding: 10px 14px;
    font-size: 14px;
    line-height: 1.1;
  }

  #we-india-modal .we-primary {
    background: #0f7c3b;
    color: #fff;
  }

  #we-india-modal .we-secondary {
    background: #f2f2f2;
    color: #333;
  }
</style>

<div id="we-india-modal-overlay" role="dialog" aria-modal="true" aria-labelledby="we-india-modal-title">
  <div id="we-india-modal">
    <h3 id="we-india-modal-title">Shop our India store?</h3>
    <p>We noticed you're in India. Switch to the India site for local pricing and faster delivery.</p>
    <div class="we-actions">
      <button type="button" class="we-secondary" id="we-india-stay">Stay here</button>
      <button type="button" class="we-primary" id="we-india-go">Go to India site</button>
    </div>
  </div>
</div>

<script>
  (function () {
    var STORAGE_KEY = "we_india_modal_dismissed";

    function showModal(targetUrl) {
      var overlay = document.getElementById("we-india-modal-overlay");
      var goBtn = document.getElementById("we-india-go");
      var stayBtn = document.getElementById("we-india-stay");

      if (!overlay || !goBtn || !stayBtn) return;

      goBtn.onclick = function () {
        window.location.href = targetUrl;
      };

      stayBtn.onclick = function () {
        localStorage.setItem(STORAGE_KEY, "1");
        overlay.style.display = "none";
      };

      overlay.style.display = "flex";
    }

    function init() {
      var userCountry = window.Shopify && Shopify.country ? Shopify.country : null;
      if (!userCountry) {
        setTimeout(init, 20);
        return;
      }

      var isIndia = userCountry === "IN";
      var onComDomain = /wellnessextract\.com$/i.test(window.location.hostname);
      var dismissed = localStorage.getItem(STORAGE_KEY) === "1";

      if (isIndia && onComDomain && !dismissed) {
        var targetUrl =
          "https://wellnessextract.in" +
          window.location.pathname +
          window.location.search +
          window.location.hash;
        showModal(targetUrl);
      }
    }

    document.addEventListener("DOMContentLoaded", init);
  })();
</script>