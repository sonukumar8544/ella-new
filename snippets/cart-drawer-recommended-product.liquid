<!-- cart-drawer-recommended-product -->
{% comment %}
  <div class="cart_grid_list">
  <img
    class="cstm_grid_list"
    loading="lazy"
    src="{% if product.featured_image != blank %}{{ product.featured_image | img_url: 'small' }}{% else %}{{ "https://cdn.shopify.com/s/files/1/0909/7514/2175/files/logofevicon.png?v=1736016366" }}{% endif %}"
    width="70"
    height="70"
    alt="{{ product.title }}"
    title=""
  >
  <div class="product-info">
    <div class="product-title" data-similar-product="{{ product.title | handle }}">{{ product.title }}</div>
    <div class="product-price">
      <div>
        {% if product.compare_at_price %}
          <span
            style="
              text-decoration: line-through;
              color: rgb(85 85 85);
              opacity: 0.8;
              font-size: 12px;
              font-weight: 600;
            "
          >
            {{ product.compare_at_price | money }}
          </span>
        {% endif %}
        <span class="discount-price" style="color: rgb(255, 203, 74);">
          {{ product.price | money }}
        </span>
        {% if settings.details_link != blank %}
          <a href="{{ product.url }}" title="" class="details-link">{{ settings.details_link }}</a>
        {% endif %}
      </div>
      {% if product.variants.size != 0 %}
        {% if settings.atc != blank %}
          {% if product.selected_or_first_available_variant.inventory_quantity > 0 %}
            <button
              class="recommended_atc_btn addtocart_btn button"
              id="recommendedProduct"
              data-productTitle="{{ product.title }}"
              data-producid="{{ product.id }}"
              data-product-inventory="{{ product.available }}"
              data-varIantid="{{ product.selected_or_first_available_variant.id }}"
              data-product-ur="{{ shop.url }}{{ product.url }}"
            >
              {{ settings.atc }}
            </button>
          {% else %}
            <button class="recommended_atc_btn soldoutBtn">Soldout</button>
          {% endif %}
        {% endif %}
      {% endif %}
    </div>
  </div>
</div>
{% endcomment %}




{%- liquid
    assign product_swatch_option = settings.swatch | downcase
    assign isColor = false
    assign variant_img = ''
    for option in product_card_product.options_with_values
        assign option_name = option.name | downcase
        if product_swatch_option contains option_name
            assign isColor = true
            assign index = forloop.index0
            assign position = forloop.index | minus: 1
            assign variant_selected = option.selected_value
            for variant in product_card_product.variants limit: 1
                if variant.image != null  
                    assign variant_img = variant.image
                endif
            endfor
          break
        else 
            assign position = 0
            assign variant_selected = nil
        endif
    endfor
-%}
<div class="product-item product-item-custom{% if settings.disable_product_card_border %} disable_product_card_border{% endif %}{% if settings.enable_custom_layout_card %} enable_custom_layout_card{% endif %}{% if settings.disable_product_card_border and settings.enable_custom_layout_card %} enable_custom_content{% endif %}{% if settings.enable_custom_position_swatch_layout_card_1 %} enable_custom_position_swatch{% endif %}" data-product-id="product-{{ product_card_product.id }}" data-json-product='{{ product_card_product | json }}'>
    <div class="card">
        <div class="card-product{% if product_card_product.featured_media == nil %} card--text-only card--soft{% endif %}">
            <a class="card-media" href="{{ product_card_product.url }}">
                {%- if product_card_product.featured_media -%}
                    {%- if variant_img != blank -%}
                        {% assign image = variant_img %}
                    {%- else -%}
                        {% assign image = product_card_product.images[0].src %}
                    {%- endif -%}
                    <img src="{{ image | img_url: '' }}" sizes="" alt="{{ image.alt | escape }}" loading="lazy" width="100%" height="100%" class="motion-reduce" style="width:100px;">
                {%- else -%}
                    {%- capture current %}{% cycle 1, 2, 3, 4 %}{% endcapture -%}
                    {%- assign placeholder_image = 'product-apparel-' | append: current -%}
                    {{ placeholder_image | placeholder_svg_tag: 'placeholder-svg' }}
                {%- endif -%}
            </a>
        </div>
        <div class="card-information">
            <div class="card-information__wrapper text-left">
                <a class="card-title link-underline{% if settings.product_title_line_text != 'full' %} card-title-ellipsis{% endif %}{% if variant_selected != blank %} card-title-change{% endif %}" href="{{ product_card_product.url }}">
                    <span class="text">{{ product_card_product.title | escape }}{% if variant_selected != blank %} <span data-change-title> - {{ variant_selected }}</span>{% endif %}</span>
                </a>
                <div class="card-price">
                    {% render 'price',
                        product: product_card_product,
                        price_class: ''
                    %}
                </div>
                {%- if settings.show_swatch and isColor -%}
                    {% render 'product-swatch',
                        product: product_card_product,
                        index: index
                    %}
                {%- endif -%}
                {% comment %} <a class="card-button" href="{{ product_card_product.url }}">{{ 'products.product.details' | t }}</a> {% endcomment %}
                {%- if settings.show_action -%}
                    <div class="card-action">
                        {% render 'add-to-cart-form-sidebar', product: product_card_product, id: 'form', position: position, sectionId: sectionId %}
                    </div>
                {%- endif -%}
            </div>
        </div>
    </div>
</div>
