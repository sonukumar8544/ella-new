<!-- job-post-career-page -->
<div class="job_post_custom-section-main">
  <h1>{{ section.settings.main_title }}</h1>
  <p>{{ section.settings.main_description }}</p>

  <div id="job-post-custom-section" class="job_post_custom-section">
    {% for block in section.blocks %}
      <div class="job_post_custom-block" data-modal="modal-{{ block.id }}">
        {% if block.settings.block_image %}
          <img
            src="{{ block.settings.block_image | img_url: 'master' }}"
            title=""
            width=""
            height=""
            alt="{{ block.settings.block_image.alt }}"
          >
        {% endif %}
        {% if block.settings.block_title != blank %}
          <h3>{{ block.settings.block_title }}</h3>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>

<!-- Move all modals outside the slider -->
{% for block in section.blocks %}
  <div id="modal-{{ block.id }}" class="custom-modal">
    <div class="custom-modal-content career-job-modal">
      <div class="custom-modal-close" data-modal-close="modal-{{ block.id }}">&times;</div>
      {% if block.settings.block_title != blank %}
        <h4>{{ block.settings.block_title }}</h4>
      {% endif %}
      {% if block.settings.block_description != blank %}
        <div class="main___content">
          {{ block.settings.block_description }}
          <br>
          {% comment %}
            {% if block.settings.link_apply != blank %}
                <div class="job-modal-button">
                  <a href="{{ block.settings.link_apply }}">
                    <button>{{ block.settings.button_label_apply }}</button></a
                  >
                </div>
              {% endif %}
          {% endcomment %}
        </div>
        <span id="show_more_btn" class="show-more">Show More</span>
        {% if block.settings.link_apply != blank %}
          <div id="btn_form" class="job-modal-button" style="margin-top: 10px;">
            <a href="{{ block.settings.link_apply }}">
              <button>{{ block.settings.button_label_apply }}</button></a
            >
          </div>
        {% endif %}
      {% endif %}
    </div>
  </div>
{% endfor %}

<style>
        .show-more {
          display: flex;
          text-align: center;
          margin-top: 10px;
          cursor: pointer;
          color: darkgoldenrod;
          font-weight: bold;
          background: #fff;
      }

          .custom-modal-content:hover .show-more {
            text-decoration: underline;
          }
         .main___content {
          height: 81vh;
            overflow: hidden;
      }
      .main___content.custom-modal-show{
         height: auto;
        overflow: auto;
      }

  .main___content.custom-modal-show::-webkit-scrollbar-track
  {
  	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
  	background-color: #fff;
  }

  .main___content.custom-modal-show::-webkit-scrollbar
  {
  	width: 2px;
  	background-color: #fff;
  }

  .main___content.custom-modal-show::-webkit-scrollbar-thumb
  {
  	background-color: #fff;
  	border: 2px solid black;
  }

    @media only screen and (max-width: 767px) {
                div#job-post-custom-section.slick-arrow.slick-prev {
                      left: -30px !important;
                  }

                  .career-job-modal{
                   width: 95% !important;
                  }
              }
              .job-post-custom-section.slick-arrow.slick-prev {
                      left: -30px !important;
                  }
                .job-modal-button {
                  display: flex;
                  justify-content: center;
                  margin-top: 4rem;
                }
                .job-modal-button button {
                  border: none;
                  padding: 10px 25px;
                  background-color: #006A91;
                  color: white;
                  font-size: 16px;
                  font-weight: 600;
                  border-radius: 8px;
                }
                .job-modal-button button:hover {
                  background-color: #005b7b;
                }
                .job_post_custom-section-main {
                  background-color: #006A91;
                  padding: 2rem 0;
                }
                .job_post_custom-section-main h2,   .job_post_custom-section-main h1 {
                  color: white;
                  text-align: center;
                  font-size: 32px;line-height: normal;
                }
                .job_post_custom-section {
                  text-align: center;
                  margin: 40px 0;
                }
               .job_post_custom-section {
                  max-width: 1200px;
                  margin: 0px auto;
                }
                .job_post_custom-block {
                  margin: 20px;
                  text-align: center;
                  cursor: pointer;

                }
                .job_post_custom-section .slick-track {
                  display: flex;
                  justify-content: center;
              }
                .job_post_custom-block img {
                  width: 100%;
                  height: auto;
                  margin-bottom: 10px;
                }
                /* Modal styles */
                .custom-modal {
                  display: none;
                  position: fixed;
                  z-index: 1000;
                  left: 0;
                  top: 0;
                  width: 100%;
                  height: 100%;
                  overflow: auto;
                  background-color: rgba(0, 0, 0, 0.5);
                  height: 100vh;
                  overflow: hidden;
                }

                .custom-modal-content {
                  background-color: #fefefe;
                  padding: 20px 50px;
                  width: 70%;
                  text-align: left;
                  margin: 2rem auto;
                  max-width: 1200px;
                  border-radius: 5px;
                  display: flex;
                  flex-direction: column;
                  height: 91vh;
                  overflow: hidden;
                }

                .custom-modal-close {
                  color: black;
                  float: right;
                  font-size: 30px;
                  font-weight: bold;
                  cursor: pointer;
                  text-align: right;
                  margin-bottom: 1rem;
                }

                .custom-modal-close:hover,
                .custom-modal-close:focus {
                  color: red;
                  text-decoration: none;
                  cursor: pointer;
                }
                @media(max-width: 768px){
                  .custom-modal-content {
                    padding: 20px;
                  }
                }
</style>

<script defer defer>
     document.addEventListener('DOMContentLoaded', function() {
       // Open modal
       document.querySelectorAll('.job_post_custom-block').forEach(function(block) {
         block.addEventListener('click', function() {
           var modalId = this.getAttribute('data-modal');
           document.getElementById(modalId).style.display = 'block';
           $(".main___content").removeClass("custom-modal-show");
          $(".show-more").show();

         });
       });

       // Close modal
       document.querySelectorAll('.custom-modal-close').forEach(function(closeBtn) {
         closeBtn.addEventListener('click', function() {
           var modalId = this.getAttribute('data-modal-close');
           document.getElementById(modalId).style.display = 'none';
         });
          document.querySelectorAll('.job_post_custom-block')
         var show_more_btn = document.getElementById("show_more_btn");
          show_more_btn.classList.remove("custom-modal-show");
         $(".main___content").removeClass("custom-modal-show");
          $(".show-more").show();
       });

       // Close modal when clicking outside of the modal content
       window.addEventListener('click', function(event) {
         document.querySelectorAll('.custom-modal').forEach(function(modal) {
           if (event.target === modal) {
             modal.style.display = 'none';
            $(".main___content").removeClass("custom-modal-show");
          $(".show-more").show();
           }
         });
       });
     });

     // Initialize Slick Slider after DOM is ready
     $('#job-post-custom-section').slick({
       infinite: true,
       speed: 300,
       slidesToShow: 3,
       slidesToScroll: 1,
       arrows: false,
       autoplay: true,
       autoplaySpeed: 5000,
       responsive: [
         {
           breakpoint: 1024,
           settings: {
             slidesToShow: 3,
             slidesToScroll: 1,
             infinite: true,
             arrows: false,
           }
         },
         {
   breakpoint: 786,
     settings: {
               slidesToShow: 1,
               slidesToScroll: 1,
               arrows: false
               }
  },
  {
   breakpoint: 568,
     settings: {
               slidesToShow: 1,
               slidesToScroll: 1,
               arrows: false,
             }

         }
       ]
     });
</script>

<script>
  $(document).ready(function () {
    $(".show-more").click(function () {
        $(".main___content").addClass("custom-modal-show");
         $(this).hide();
       });

  });
</script>

{% schema %}
{
  "name": "Job Post section",
  "settings": [
    {
      "type": "text",
      "id": "main_title",
      "label": "Main Title",
      "default": "This is the Main Title"
    }, {
      "type": "textarea",
      "id": "main_description",
      "label": "Main Description",
      "default": "Add description"
    }
  ],
  "blocks": [
    {
      "type": "image_with_title",
      "name": "Image with Title",
      "settings": [
        {
          "type": "image_picker",
          "id": "block_image",
          "label": "Image"
        }, {
          "type": "text",
          "id": "block_title",
          "label": "Title"
        }, {
          "type": "richtext",
          "id": "block_description",
          "label": "Description"
        },
        {
          "type": "url",
          "id": "link_apply",
          "label": "Button Link"
        },
        {
          "type": "text",
          "id": "button_label_apply",
          "label": "Button Label",
          "default": "Apply Now"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "job post section",
      "category": "Custom"
    }
  ]
}
{% endschema %}
