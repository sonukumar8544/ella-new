

{% liquid
  assign section_id = 'two-col-red-flag-' | append: section.id
%}

<section id="{{ section_id }}" class="two-col-red-flag">
  <div class="two-col-red-flag__container">
    <div class="two-col-red-flag__grid">
      <div class="two-col-red-flag__content">
        {% if section.settings.heading != blank %}
          <h2 class="two-col-red-flag__heading">
            {{ section.settings.heading | escape }}
          </h2>
        {% endif %}

        {% if section.settings.intro_text != blank %}
          <p class="two-col-red-flag__intro">
            {{ section.settings.intro_text }}
          </p>
        {% endif %}

        <div class="two-col-red-flag__items">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'flag' %}
                <div class="two-col-red-flag__item" {{ block.shopify_attributes }}>
                  <div class="two-col-red-flag__icon">
                    <img
                      src="https://cdn.shopify.com/s/files/1/0735/8172/3944/files/caution_13697021_1.svg?v=1764570874"
                      alt="{{ block.settings.title | default: section.settings.heading | escape }}"
                      width="32"
                      height="32"
                      loading="lazy"
                      class="two-col-red-flag__icon-img"
                    >
                  </div>
                  <div class="two-col-red-flag__text">
                    {% if block.settings.title != blank %}
                      <p class="two-col-red-flag__title">{{ block.settings.title }}</p>
                    {% endif %}
                    {% if block.settings.description != blank %}
                      <p class="two-col-red-flag__description">{{ block.settings.description }}</p>
                    {% endif %}
                  </div>
                </div>
              {% when 'cta_link' %}
                {% if block.settings.link_label != blank and block.settings.link_url != blank %}
                  <div class="two-col-red-flag__item two-col-red-flag__item--link" {{ block.shopify_attributes }}>
                    <div class="two-col-red-flag__icon two-col-red-flag__icon--spacer" aria-hidden="true"></div>
                    <a
                      href="{{ block.settings.link_url }}"
                      class="two-col-red-flag__cta-block"
                      {% if block.settings.open_in_new_tab %}
                        target="_blank" rel="noopener noreferrer"
                      {% endif %}
                    >
                      <span>{{ block.settings.link_label }}</span>
                      <svg viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M3 8h9.17l-3.58 3.59L10 13l5-5-5-5-1.41 1.41L12.17 7H3z" />
                      </svg>
                    </a>
                  </div>
                {% endif %}
            {% endcase %}
          {% else %}
            <p class="two-col-red-flag__empty">
              Add blocks to populate this section.
            </p>
          {% endfor %}
        </div>

        {% if section.settings.cta_label != blank and section.settings.cta_link != blank %}
          <a
            class="two-col-red-flag__cta"
            href="{{ section.settings.cta_link }}"
            {% if section.settings.cta_target %}
              target="_blank" rel="noopener noreferrer"
            {% endif %}
          >
            <span>{{ section.settings.cta_label }}</span>
            <svg viewBox="0 0 16 16" aria-hidden="true">
              <path d="M3 8h9.17l-3.58 3.59L10 13l5-5-5-5-1.41 1.41L12.17 7H3z" />
            </svg>
          </a>
        {% endif %}
      </div>

      {% if section.settings.feature_image != blank %}
        <div class="two-col-red-flag__media">
          {{ section.settings.feature_image | image_url: width: 900 | image_tag:
            loading: 'lazy',
            sizes: '(min-width: 1200px) 480px, (min-width: 768px) 40vw, 90vw',
            class: 'two-col-red-flag__image'
          }}
        </div>
      {% endif %}
    </div>
  </div>
</section>

<style>
  #{{ section_id }} {
    padding: clamp(2rem, 6vw, 4.5rem) 0;
    background: #fff;
  }

  #{{ section_id }} .two-col-red-flag__container {
    width: min(1200px, 100%);
    margin: 0 auto;
    padding: 0 clamp(1.5rem, 5vw, 3rem);
  }

  #{{ section_id }} .two-col-red-flag__grid {
    display: grid;
    gap: clamp(2rem, 4vw, 4rem);
    align-items: center;
  }

  @media (min-width: 992px) {
    #{{ section_id }} .two-col-red-flag__grid {
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.8fr);
    }
  }

  #{{ section_id }} .two-col-red-flag__heading {
    font-size: 38px;
    font-weight: 700;
    color: #374650;
    margin: 0 0 5rem;
  }

  #{{ section_id }} .two-col-red-flag__intro {
    color: #374650;
    font-size: 17px;
    font-weight: 400;
    margin: 0 0 2rem;
  }

  #{{ section_id }} .two-col-red-flag__items {
    display: grid;
    grid-template-columns: minmax(0, 1fr);
    gap: 2.5rem;
  }

  @media (min-width: 600px) {
    #{{ section_id }} .two-col-red-flag__items {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  @media (min-width: 992px) {
    #{{ section_id }} .two-col-red-flag__items {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  #{{ section_id }} .two-col-red-flag__item {
    display: flex;
    gap: 1rem;
    padding-top: 2rem;
    border-top: 2px solid #dadada;
    align-items: flex-start;
  }

  #{{ section_id }} .two-col-red-flag__icon {
    flex: 0 0 auto;
    width: 18px;
    height: 18px;
  }

  #{{ section_id }} .two-col-red-flag__icon-img {
    width: 100%;
    height: 100%;
    display: block;
    object-fit: contain;
  }

  #{{ section_id }} .two-col-red-flag__text {
    flex: 1;
  }

  #{{ section_id }} .two-col-red-flag__title {
    margin: 0 0 1.5rem;
    font-weight: 600;
    color: #374650;
    font-size: 18px;
    line-height: 1.2;
    font-family: 'Nunito', sans-serif;
  }

  #{{ section_id }} .two-col-red-flag__description {
    margin: 0;
    color: #374650;
    font-size: 16px;
    font-weight: 400;
    line-height: 1.5;
  }

  #{{ section_id }} .two-col-red-flag__cta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 2rem;
    font-weight: 600;
    color: var(--color-accent, #086B92);
    text-decoration: none;
  }

  #{{ section_id }} .two-col-red-flag__cta svg {
    width: 16px;
    height: 16px;
    fill: currentColor;
  }

  #{{ section_id }} .two-col-red-flag__media {
    text-align: center;
  }

  #{{ section_id }} .two-col-red-flag__image {
    width: 100%;
    height: auto;
    border-radius: 1.5rem;
    object-fit: cover;
    box-shadow: 0 15px 35px rgba(15, 23, 42, 0.12);
  }

  #{{ section_id }} .two-col-red-flag__empty {
    grid-column: 1 / -1;
    color: #6b7280;
  }
  #{{ section_id }} .two-col-red-flag__icon--spacer {
    visibility: hidden;
  }

  #{{ section_id }} .two-col-red-flag__item--link .two-col-red-flag__icon {
    width: 18px;
  }

  #{{ section_id }} .two-col-red-flag__item--link {
    align-items: flex-end;
  }

  #{{ section_id }} .two-col-red-flag__cta-block {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: var(--color-accent, #086B92);
    text-decoration: none;
    line-height: 1.3;
    font-size: 20px;
    font-weight: 500 !important;
    border-bottom: 1px solid currentColor;
    padding-bottom: 0.25rem;
    margin-left: auto;
  }

  #{{ section_id }} .two-col-red-flag__cta-block svg {
    width: 16px;
    height: 16px;
    fill: currentColor;
  }
@media (max-width: 600px) {
    #{{ section_id }} .two-col-red-flag__item {
      padding-top: 1.5rem;
    }

    #{{ section_id }} .two-col-red-flag__heading {
    font-size: 28px;
    font-weight: 600;
    color: #374650;
    margin: 0 0 2rem;
    line-height: 1.3;
  }

  #{{ section_id }} .two-col-red-flag__cta-block {
    margin-left: inherit !important;
  }

  }
</style>

{% schema %}
{
  "name": "Two column red flag",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Red Flags to Watch Out For"
    },
    {
      "type": "textarea",
      "id": "intro_text",
      "label": "Intro text"
    },
    {
      "type": "image_picker",
      "id": "feature_image",
      "label": "Feature image"
    },
    {
      "type": "text",
      "id": "cta_label",
      "label": "Link label",
      "default": "See the Tocopherol-Free Option"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Link URL"
    },
    {
      "type": "checkbox",
      "id": "cta_target",
      "label": "Open link in new tab",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "flag",
      "name": "Red flag",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Labels that only say “mixed tocopherols.”"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "These are often less effective and not the true form of Vitamin E you want."
        }
      ]
    },
    {
      "type": "cta_link",
      "name": "Link block",
      "settings": [
        {
          "type": "text",
          "id": "link_label",
          "label": "Link label",
          "default": "See the Tocopherol-Free Option"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        },
        {
          "type": "checkbox",
          "id": "open_in_new_tab",
          "label": "Open link in new tab",
          "default": false
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Two column red flag",
      "blocks": [
        {
          "type": "flag"
        },
        {
          "type": "flag"
        },
        {
          "type": "flag"
        },
        {
          "type": "flag"
        },
        {
          "type": "flag"
        },
        {
          "type": "cta_link"
        }
      ]
    }
  ]
}
{% endschema %}